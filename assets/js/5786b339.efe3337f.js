"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[224],{8800:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>l,frontMatter:()=>i,metadata:()=>u,toc:()=>c});var t=s(4848),a=s(8453);const i={},r="Enums",u={id:"tutorial-ruby-couchbase-orm/enums",title:"Enums",description:"CouchbaseOrm provides support for enums, which allow you to define a fixed set of values for an attribute. Enums are useful when you have a limited number of possible values for a particular attribute and want to ensure data consistency and validity.",source:"@site/docs/tutorial-ruby-couchbase-orm/10-enums.md",sourceDirName:"tutorial-ruby-couchbase-orm",slug:"/tutorial-ruby-couchbase-orm/enums",permalink:"/docs/tutorial-ruby-couchbase-orm/enums",draft:!1,unlisted:!1,editUrl:"https://github.com/couchbase-examples/ruby-couchbase-orm-quickstart/tree/docs/docusaurus/docusaurus/docs/docs/tutorial-ruby-couchbase-orm/10-enums.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Nested Documents",permalink:"/docs/tutorial-ruby-couchbase-orm/nested-documents"},next:{title:"Encryption",permalink:"/docs/tutorial-ruby-couchbase-orm/encryption"}},d={},c=[{value:"10.1. Defining Enums",id:"101-defining-enums",level:2},{value:"10.2. Using Enums",id:"102-using-enums",level:2},{value:"10.3. Querying by Enums",id:"103-querying-by-enums",level:2},{value:"10.4. Enum Mapping",id:"104-enum-mapping",level:2},{value:"10.5. Enum Validation",id:"105-enum-validation",level:2},{value:"10.6. Enum Defaults",id:"106-enum-defaults",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"enums",children:"Enums"}),"\n",(0,t.jsx)(n.p,{children:"CouchbaseOrm provides support for enums, which allow you to define a fixed set of values for an attribute. Enums are useful when you have a limited number of possible values for a particular attribute and want to ensure data consistency and validity."}),"\n",(0,t.jsx)(n.h2,{id:"101-defining-enums",children:"10.1. Defining Enums"}),"\n",(0,t.jsxs)(n.p,{children:["To define an enum in your model, you can use the ",(0,t.jsx)(n.code,{children:"enum"})," class method provided by CouchbaseOrm."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"class User < CouchbaseOrm::Base\n  enum status: [:active, :inactive, :suspended]\nend\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, we define an enum named ",(0,t.jsx)(n.code,{children:"status"})," for the ",(0,t.jsx)(n.code,{children:"User"})," model. The enum has three possible values: ",(0,t.jsx)(n.code,{children:":active"}),", ",(0,t.jsx)(n.code,{children:":inactive"}),", and ",(0,t.jsx)(n.code,{children:":suspended"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"102-using-enums",children:"10.2. Using Enums"}),"\n",(0,t.jsx)(n.p,{children:"You can assign enum values to an attribute using the generated methods or by directly assigning the value."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'user = User.new\nuser.status = :active\nuser.save\n\nuser.suspended!\nuser.save\n\nputs user.status  # Output: "suspended"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, we create a new ",(0,t.jsx)(n.code,{children:"User"})," instance and set the ",(0,t.jsx)(n.code,{children:"status"})," to ",(0,t.jsx)(n.code,{children:":active"})," using the direct assignment. We then change the ",(0,t.jsx)(n.code,{children:"status"})," to ",(0,t.jsx)(n.code,{children:":suspended"})," using the generated ",(0,t.jsx)(n.code,{children:"suspended!"})," method."]}),"\n",(0,t.jsx)(n.h2,{id:"103-querying-by-enums",children:"10.3. Querying by Enums"}),"\n",(0,t.jsx)(n.p,{children:"CouchbaseOrm allows you to query records based on their enum values."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"active_users = User.where(status: 1)\nsuspended_users = User.where(status: 3)\n"})}),"\n",(0,t.jsxs)(n.p,{children:["These queries retrieve users with the ",(0,t.jsx)(n.code,{children:"status"})," enum set to ",(0,t.jsx)(n.code,{children:":active"})," and ",(0,t.jsx)(n.code,{children:":suspended"}),", respectively."]}),"\n",(0,t.jsx)(n.h2,{id:"104-enum-mapping",children:"10.4. Enum Mapping"}),"\n",(0,t.jsx)(n.p,{children:"Behind the scenes, CouchbaseOrm maps the enum values to integers for storage in the database. By default, the mapping starts from 0 and increments by 1 for each enum value in the order they are defined."}),"\n",(0,t.jsx)(n.p,{children:"However, you can customize the mapping by providing a hash of enum values and their corresponding integer values."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"class User < CouchbaseOrm::Base\n  enum status: { active: 1, inactive: 2, suspended: 3 }\nend\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, we explicitly define the mapping of enum values to integers. The ",(0,t.jsx)(n.code,{children:":active"})," value is mapped to 1, ",(0,t.jsx)(n.code,{children:":inactive"})," to 2, and ",(0,t.jsx)(n.code,{children:":suspended"})," to 3."]}),"\n",(0,t.jsx)(n.h2,{id:"105-enum-validation",children:"10.5. Enum Validation"}),"\n",(0,t.jsx)(n.p,{children:"CouchbaseOrm automatically validates that the assigned enum value is one of the defined values for the enum."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'user = User.new\nuser.status = :invalid\nuser.save # Raises an error: "Invalid enum value: :invalid"\n'})}),"\n",(0,t.jsx)(n.p,{children:"If you try to assign an invalid value to an enum attribute, CouchbaseOrm will raise an error indicating that the value is not a valid enum value."}),"\n",(0,t.jsx)(n.h2,{id:"106-enum-defaults",children:"10.6. Enum Defaults"}),"\n",(0,t.jsxs)(n.p,{children:["You can specify a default value for an enum attribute using the ",(0,t.jsx)(n.code,{children:"default"})," option."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"class User < CouchbaseOrm::Base\n  enum status: [:active, :inactive, :suspended], default: :active\nend\n"})}),"\n",(0,t.jsxs)(n.p,{children:["In this example, if no value is assigned to the ",(0,t.jsx)(n.code,{children:"status"})," attribute when creating a new ",(0,t.jsx)(n.code,{children:"User"})," instance, the default value of ",(0,t.jsx)(n.code,{children:":active"})," will be used."]}),"\n",(0,t.jsx)(n.p,{children:"Enums in CouchbaseOrm provide a convenient way to define a fixed set of values for an attribute. They help ensure data consistency, improve code readability, and simplify querying and validation."}),"\n",(0,t.jsx)(n.p,{children:"When using enums, consider the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Enums are stored as integers in the database, so be cautious when changing the order or removing enum values, as it may affect existing records."}),"\n",(0,t.jsxs)(n.li,{children:["Enums are case-sensitive, so ",(0,t.jsx)(n.code,{children:":active"})," and ",(0,t.jsx)(n.code,{children:":Active"})," are considered different values."]}),"\n",(0,t.jsxs)(n.li,{children:["Enums can be used in combination with other attribute types, such as ",(0,t.jsx)(n.code,{children:"default"})," and ",(0,t.jsx)(n.code,{children:"validates"}),", to further customize the behavior of the attribute."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In the next section, we'll explore how to use encryption in CouchbaseOrm to secure sensitive data stored in your Couchbase documents."})]})}function l(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>u});var t=s(6540);const a={},i=t.createContext(a);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function u(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);